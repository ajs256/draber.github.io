!function(){"use strict";const t={$:(t,e=null)=>"string"==typeof t?(e||document).querySelector(t):t||null,$$:(t,e=null)=>[].slice.call((e||document).querySelectorAll(t)),toNode:t=>{const e=document.createDocumentFragment();if(void 0===t)return e;if(t instanceof Element||t instanceof DocumentFragment)return t;if("number"==typeof t&&(t=t.toString()),"string"==typeof t||t instanceof String){t=(new DOMParser).parseFromString(t,"text/html").body.childNodes}if("function"==typeof t.forEach)return Array.from(t).forEach((t=>{e.append(t)})),e;console.error("Expected Element|DocumentFragment|Iterable|String|HTMLCode, got",t)},empty:t=>{for(;t.lastChild;)t.lastChild.remove();return t.textContent="",t}},e=function({tag:e,content:a,attributes:s={},style:r={},data:o={},events:i={},classNames:n=[],isSvg:l}={}){const d=l?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);"a"===e&&s.href&&!a&&(a=new URL(s.href).hostname);for(let[t,e]of Object.entries(s))l?d.setAttributeNS(null,t,e.toString()):"role"===t||t.startsWith("aria-")?d.setAttribute(t,e):!1!==e&&(d[t]=e.toString());for(let[t,e]of Object.entries(o))e=e.toString(),d.dataset[t]=e;for(const[t,e]of Object.entries(i))d.addEventListener(t,e,!1);return Object.assign(d.style,r),n.length&&d.classList.add(...n),void 0!==a&&d.append(t.toNode(a)),d},a=new Proxy(t,{get:(t,a)=>function(){const s=Array.from(arguments);return Object.prototype.hasOwnProperty.call(t,a)&&"function"==typeof t[a]?(t[a].bind(t),t[a].apply(null,s)):e({tag:a,...s.shift()})}});const s={version:"3.2.1",label:"Spelling Bee Assistant",title:"Assistant",url:"https://spelling-bee-assistant.app/",prefix:"sba",repo:"draber/draber.github.io.git",targetUrl:"https://www.nytimes.com/puzzles/spelling-bee",mobileThreshold:"900",options:JSON.parse(localStorage.getItem("sba-settings")||"{}")},r=()=>{localStorage.setItem(s.prefix+"-settings",JSON.stringify(s.options))};s.options.version&&s.options.version!==s.version&&(s.options.oldVersion=s.options.version),s.options.version=s.version,r();var o=t=>{let e=Object.create(s);for(let a of t.split(".")){if(void 0===e[a])return;e=e[a]}return e},i=(t,e)=>{const a=t.split("."),o=a.pop();let i=s;for(let t of a){if(i[t]||(i[t]={}),"[object Object]"!==Object.prototype.toString.call(i))return console.error(`${t} is not of the type Object`),!1;i=i[t]}i[o]=e,r()};const n=o("prefix"),l=t=>t.replace(/[_-]+/," ").replace(/(?:^[\w]|[A-Z]|\b\w|\s+)/g,(function(t,e){return 0==+t?"":0===e?t.toLowerCase():t.toUpperCase()})),d=(t="",e="c")=>{switch(e){case"c":return l(n+"_"+t);case"d":return(t=>t.replace(/[\W_]+/g," ").split(/ |\B(?=[A-Z])/).map((t=>t.toLowerCase())).join("-"))(n+t.charAt(0).toUpperCase()+t.slice(1));default:return n+t}};let p;const c=window.gameData.today;let h;const g=()=>{p.foundPangrams=p.foundTerms.filter((t=>p.pangrams.includes(t))),p.remainders=p.answers.filter((t=>!p.foundTerms.includes(t))),h.trigger(d("refreshUi"))};var b=(t,e)=>{h=t,(t=>{p={answers:c.answers,pangrams:c.pangrams,letters:c.validLetters,foundTerms:t},g()})(e),h.on(d("newWord"),(t=>{var e;e=t.detail,p.foundTerms.push(e),g()}))},u=t=>p[t],m=t=>p[t].length,f=t=>{const e=p[t];let a=0;return e.forEach((t=>{p.pangrams.includes(t)?a+=t.length+7:t.length>4?a+=t.length:a+=1})),a},v=()=>c.id,x=()=>c.displayDate,w=()=>c.centerLetter;class y{getState(){const t=o(`options.${this.key}`);return void 0!==t?t:this.defaultState}setState(t){return this.canChangeState&&i(`options.${this.key}`,t),this}toggle(t){return this.canChangeState?(this.setState(t),this.hasUi()&&this.ui.classList.toggle("inactive",!t),this):this}hasUi(){return this.ui instanceof HTMLElement}on(t,e){return this.hasUi()&&this.ui.addEventListener(t,e),this}trigger(t,e){return this.hasUi()&&this.ui.dispatchEvent(e?new CustomEvent(t,{detail:e}):new Event(t)),this}constructor(t,{key:e,canChangeState:a,defaultState:s}={}){if(!t)throw new TypeError(`Missing 'title' from ${this.constructor.name}`);this.title=t,this.key=e||l(t),this.canChangeState=void 0!==a&&a,this.defaultState=void 0===s||s,this.setState(this.getState()),this.ui=null}}class k extends y{attach(){return this.hasUi()?(this.ui.dataset.ui=this.key,(this.target||this.app.ui)[this.addMethod](this.ui),this):this}add(){return this.attach()}run(t){return this}constructor(t,e,a,{key:s,canChangeState:r,defaultState:o,menuIcon:i,runEvt:n,addMethod:l}={}){super(e,{key:s,canChangeState:r,defaultState:o}),this.target,this.description=a||"",this.app=t,this.addMethod=l||"append",this.menuIcon=i||"checkbox",n&&this.app.on(n,(t=>{this.run(t)}))}}class S extends k{toggle(t){return super.toggle(t),document.body.dataset[d("theme")]=t?"dark":"light",this}constructor(t){super(t,"Dark Mode","Applies a dark theme to this page",{canChangeState:!0,defaultState:!1}),this.toggle(this.getState())}}class z extends k{constructor(t){super(t,o("title"),"",{key:"header"}),this.ui=a.div({content:a.div({content:this.title,classNames:["header"]})}),t.on(d("toolsReady"),(t=>{const e=a.div({classNames:["toolbar"]});return t.detail.forEach((t=>{e.append(t)})),this.ui.append(e),this}))}}class C extends k{run(t){let e=100*f("foundTerms")/f("answers");return e=Math.min(Number(Math.round(e+"e2")+"e-2"),100),this.ui.value=e,this.ui.textContent=a.toNode(e+"%"),this.ui.title=`Progress: ${e}%`,this}constructor(t){super(t,"Progress Bar","Displays your progress as a yellow bar",{canChangeState:!0,runEvt:d("refreshUi")}),this.ui=a.progress({attributes:{max:100}})}}class L extends k{add(t="append"){this.ui=a.details({attributes:{open:this.open},content:[a.summary({content:this.title}),this.pane]}),super.add(t)}constructor(t,e,a,{canChangeState:s,defaultState:r=!0,open:o=!1,runEvt:i}={}){super(t,e,a,{canChangeState:s,defaultState:r,runEvt:i}),this.title=e,this.open=o}}class T extends L{run(t){this.pane=a.empty(this.pane);const e=a.tbody();return this.getData().forEach(((t,s)=>{const r=[];for(const[e,a]of Object.entries(this.cssMarkers))a(t,s)&&r.push(d(e,"d"));e.append(a.tr({classNames:r,content:t.map((t=>a.td({content:t})))}))})),this.pane.append(e),this}constructor(t,e,s,{canChangeState:r,defaultState:o=!0,open:i=!1,runEvt:n=d("refreshUi")}={}){super(t,e,s,{canChangeState:r,defaultState:o,open:i,runEvt:n}),this.cssMarkers={},this.pane=a.table({classNames:["pane"]})}}class N extends T{getData(){const t=["foundTerms","remainders","answers"];return[["","✓","?","∑"],["Words"].concat(t.map((t=>m(t)))),["Points"].concat(t.map((t=>f(t))))]}constructor(t){super(t,"Score so far","The number of words and points and how many have been found",{canChangeState:!0,open:!0})}}class _ extends k{run(t){let e="🙂";t.detail?u("remainders").filter((e=>e.startsWith(t.detail))).length||(e="🙁"):e="😐",this.ui.textContent=e}constructor(t){super(t,"Spill the beans","An emoji that shows if the last letter was right or wrong",{canChangeState:!0,runEvt:d("newInput"),addMethod:"prepend"}),this.ui=a.div({content:"😐"}),this.target=a.$(".sb-controls",this.app.gameWrapper),this.toggle(this.getState())}}class E extends T{getData(){const t={},e=m("pangrams"),a=m("foundPangrams"),s=[["","✓","?","∑"]];u("answers").forEach((e=>{t[e.length]=t[e.length]||{found:0,missing:0,total:0},u("foundTerms").includes(e)?t[e.length].found++:t[e.length].missing++,t[e.length].total++}));let r=Object.keys(t);return r.sort(((t,e)=>t-e)),r.forEach((e=>{s.push([e+" "+(e>1?"letters":"letter"),t[e].found,t[e].missing,t[e].total])})),s.push(["Pangrams",a,e-a,e]),s}constructor(t){super(t,"Spoilers","The number of words by length, also the number of pangrams",{canChangeState:!0}),this.cssMarkers={completed:(t,e)=>e>0&&0===t[2],preeminent:(t,e)=>e>0&&"Pangrams"===t[0]}}}class $ extends T{getData(){const t={},e=u("answers").sort(((t,e)=>t.startsWith(this.centerLetter)?-1:e.startsWith(this.centerLetter)?1:t<e?-1:1)),a=u("remainders"),s={foundTerms:0,remainders:0,total:0};e.forEach((e=>{const r=e.charAt(0);void 0===t[r]&&(t[r]={...s}),a.includes(e)?t[r].remainders++:t[r].foundTerms++,t[r].total++}));const r=[["","✓","?","∑"]];for(let[e,a]of Object.entries(t))a=Object.values(a),a.unshift(e),r.push(a);return r}constructor(t){super(t,"Starting with…","The number of words by first letter",{canChangeState:!0}),this.cssMarkers={completed:(t,e)=>e>0&&0===t[2],preeminent:(t,e)=>e>0&&t[0]===w()}}}class M extends T{getData(){const t=f("answers");return[["Beginner",0],["Good Start",2],["Moving Up",5],["Good",8],["Solid",15],["Nice",25],["Great",40],["Amazing",50],["Genius",70],["Queen Bee",100]].map((e=>[e[0],Math.round(e[1]/100*t)]))}getCurrentTier(){return this.getData().filter((t=>t[1]<=f("foundTerms"))).pop()[1]}constructor(t){super(t,"Steps to success","The number of points required for each level",{canChangeState:!0}),this.cssMarkers={completed:t=>t[1]<f("foundTerms")&&t[1]!==this.getCurrentTier(),preeminent:t=>t[1]===this.getCurrentTier()}}}class W extends k{getTarget(){const t=d("popup-container","d");let e=a.$(`[data-ui="${t}"]`);return e||(e=a.template({data:{ui:t}}),a.$("body").append(e)),e}create(){return a.div({classNames:["sb-modal-frame","left-aligned",d("pop-up","d")],attributes:{role:"button"},data:{ui:this.key},events:{click:t=>{t.stopPropagation()}},content:[a.div({attributes:{role:"button"},classNames:["sb-modal-close"],content:"×",events:{click:()=>{this.toggle(!1)}}}),a.div({classNames:["sb-modal-content"],content:[a.div({classNames:["sb-modal-header"],content:[this.parts.title,this.parts.subtitle]}),this.parts.body,this.parts.footer]})]})}setContent(t,e){return this.parts[t]?(this.parts[t]=a.empty(this.parts[t]),this.parts[t].append(a.toNode(e)),this):(console.error(`Unknown target ${t}`),this)}toggle(t){const e=a.$(".sb-modal-close",this.modalWrapper);return!this.getState()&&e&&e.click(),t?(this.modalWrapper.append(this.ui),this.modalSystem.classList.add("sb-modal-open"),this.state=!0):(this.getTarget().append(this.ui),this.modalSystem.classList.remove("sb-modal-open"),this.state=!1),this.app.trigger(d("popup"),{plugin:this}),this}getState(){return this.state}constructor(t,e,s,{key:r}={}){super(t,e,s,{key:r,canChangeState:!0,defaultState:!1}),this.state=!1,this.modalSystem=a.$(".sb-modal-system"),this.modalWrapper=a.$(".sb-modal-wrapper",this.modalSystem),this.parts={title:a.h3({classNames:["sb-modal-title"],content:e}),subtitle:a.p({classNames:["sb-modal-message"],content:s}),body:a.div({classNames:["sb-modal-body"]}),footer:a.div({classNames:["sb-modal-message","sba-modal-footer"],content:[a.a({content:o("label")+" v"+o("version"),attributes:{href:o("url"),target:"_blank"}})]})},this.app.popups||(this.app.popups=new Map),this.app.popups.has(r)||this.app.popups.set(r,this.create()),this.target=this.getTarget(),this.ui=this.app.popups.get(r)}}class O extends k{getDescription(){return a.div({classNames:["sb-modal-date__today"],content:x()})}toggle(t){if(!t)return this.popup.toggle(t),this;const e=u("answers"),s=u("foundTerms"),r=u("pangrams"),o=this.app.plugins.get("googlify"),i=this.app.plugins.get("highlightPangrams"),n=a.div({content:u("letters").join(""),classNames:["sb-modal-letters"]}),l=["sb-modal-wordlist-items"],p={};o&&(l.push(d("googlified","d")),p.pointerup=o.listener);const c=a.ul({classNames:l,events:p});return e.forEach((t=>{const e=["check"];s.includes(t)&&e.push("checked");let o=a.li({content:[a.span({classNames:e}),a.span({classNames:["sb-anagram"],content:t})]});i&&r.includes(t)&&o.classList.add(i.marker),c.append(o)})),this.popup.setContent("body",[n,c]).toggle(t),this}constructor(t){super(t,"Surrender","Reveals the solution of the game",{canChangeState:!0,defaultState:!1}),this.marker=d("resolved","d"),this.popup=new W(this.app,"Today’s Answers",this.getDescription(),{key:this.key+"PopUp"}),this.menuIcon="warning",this.ui=this.popup.ui,this.toggle(!1)}}class j extends k{toggle(t){return super.toggle(t),this.run()}run(t){const e=this.app.getObserverArgs();this.app.observer.disconnect();const s=u("pangrams");return a.$$("li",this.app.resultList).forEach((t=>{const e=t.textContent;s.includes(e)&&t.classList.toggle(this.marker,this.getState())})),this.app.observer.observe(e.target,e.options),this}constructor(t){super(t,"Highlight Pangrams","",{canChangeState:!1,runEvt:d("refreshUi")}),this.marker=d("pangram","d"),this.run()}}class A extends k{toggle(t){return super.toggle(t),this.run()}listener(t){return!(!t.target.classList.contains("sb-anagram")||!t.target.closest(".sb-anagram"))&&(0===t.button?window.open(`https://www.google.com/search?q=${t.target.textContent}`,d()):void 0)}run(){const t=(this.getState()?"add":"remove")+"EventListener";return this.app.resultList[t]("pointerup",this.listener),this.app.resultList.classList.toggle(d("googlified","d"),this.getState()),this}constructor(t){super(t,"Googlify","Link all result terms to Google",{canChangeState:!1}),this.run()}}class P extends k{constructor(t){super(t,`${o("label")}`,"",{key:"footer"}),this.ui=a.a({content:this.title,attributes:{href:o("url"),target:d()}})}}class D extends k{modifyMq(){let t,e;for(let t of document.styleSheets)if(t.href&&t.href.startsWith("https://www.nytimes.com/games-assets/v2/spelling-bee")){e=t;break}if(t=e.rules,!t)return;let a=t.length;for(let s=0;s<a;s++)if(t[s]instanceof CSSMediaRule&&t[s].conditionText.includes("min-width: 768px")&&!t[s].cssText.includes(".sb-modal")){const a=t[s].cssText.replace("min-width: 768px",`min-width: ${o("mobileThreshold")}px`).replace(/(?:\\[rn]|[\r\n]+)+/g,"").replace(/\s+/g," ");e.deleteRule(s),e.insertRule(a,s)}}constructor(t){super(t,"Styles",""),this.target=a.$("head"),this.ui=a.style({content:'[data-sba-active=true]{--sba-app-width: 138px;--sba-app-padding: 0 5px 3px;--sba-app-margin: 64px 0 0 0;--sba-game-offset: 12px;--sba-game-width: 1256px;--sba-mobile-threshold: 900px }@media(min-width: 968px){[data-sba-active=true]{--sba-app-width: 160px;--sba-app-padding: 0 8px 5px}}[data-sba-theme=light]{--text-color:#000;--site-text-color:rgba(0,0,0,.9);--link-color:#326891;--link-visited-color:#326891;--link-hover-color:#5f8ab1;--body-bg-color:#fff;--modal-bg-color:rgba(255,255,255,.85);--border-color:#dcdcdc;--area-bg-color:#e6e6e6;--invalid-color:#a2a2a2;--card-color:rgba(248,205,5,.1);--success-color:#248a17;--menu-hover-color:#f4f4f4}[data-sba-theme=dark]{--text-color:#e7eae1;--site-text-color:rgba(255,255,255,.9);--link-color:#51a9f7;--link-visited-color:#8dc6f8;--link-hover-color:#8dc6f8;--body-bg-color:#111;--modal-bg-color:rgba(17,17,17,.85);--border-color:#333;--area-bg-color:#393939;--invalid-color:#666;--card-color:#393939;--success-color:#47c537;--menu-hover-color:#393939}html{--highlight-color: rgb(248, 205, 5);--shadow-light-color: rgba(248, 205, 5, .35);--shadow-dark-color: rgba(248, 205, 5, .7)}[data-sba-active=true]{--sba-app-width: 138px;--sba-app-padding: 0 5px 3px;--sba-app-margin: 64px 0 0 0;--sba-game-offset: 12px;--sba-game-width: 1256px;--sba-mobile-threshold: 900px }@media(min-width: 968px){[data-sba-active=true]{--sba-app-width: 160px;--sba-app-padding: 0 8px 5px}}[data-sba-theme=dark]{background:var(--body-bg-color);color:var(--text-color)}[data-sba-theme=dark] .pz-moment__loading{color:#000}[data-sba-theme=dark] .pz-game-wrapper{background:inherit !important;color:inherit}[data-sba-theme=dark] .pz-nav__hamburger-inner,[data-sba-theme=dark] .pz-nav__hamburger-inner::before,[data-sba-theme=dark] .pz-nav__hamburger-inner::after{background-color:var(--text-color)}[data-sba-theme=dark] .pz-nav{width:100%;background:var(--body-bg-color)}[data-sba-theme=dark] .pz-nav__logo{filter:invert(1)}[data-sba-theme=dark] .sb-modal-scrim{background:var(--modal-bg-color);color:var(--text-color)}[data-sba-theme=dark] .pz-modal__title,[data-sba-theme=dark] .sb-modal-close{color:var(--text-color)}[data-sba-theme=dark] .sb-modal-frame,[data-sba-theme=dark] .pz-modal__button.white{background:var(--body-bg-color);color:var(--text-color)}[data-sba-theme=dark] .pz-modal__button.white:hover{background:var(--area-bg-color)}[data-sba-theme=dark] .sb-message{background:var(--area-bg-color)}[data-sba-theme=dark] .sb-input-invalid{color:var(--invalid-color)}[data-sba-theme=dark] .sb-toggle-expand{box-shadow:none}[data-sba-theme=dark] .sb-progress-marker .sb-progress-value,[data-sba-theme=dark] .hive-cell.center .cell-fill{background:var(--highlight-color);fill:var(--highlight-color);color:var(--body-bg-color)}[data-sba-theme=dark] .sb-input-bright{color:var(--highlight-color)}[data-sba-theme=dark] .hive-cell.outer .cell-fill{fill:var(--area-bg-color)}[data-sba-theme=dark] .cell-fill{stroke:var(--body-bg-color)}[data-sba-theme=dark] .cell-letter{fill:var(--text-color)}[data-sba-theme=dark] .hive-cell.center .cell-letter{fill:var(--body-bg-color)}[data-sba-theme=dark] .hive-action:not(.hive-action__shuffle){background:var(--body-bg-color);color:var(--text-color)}[data-sba-theme=dark] .hive-action:not(.hive-action__shuffle):hover{background:var(--area-bg-color)}[data-sba-theme=dark] .hive-action__shuffle{filter:invert(100%)}[data-sba-theme=dark] *:not(.hive-action__shuffle):not(.sba-pangram):not(.sba-preeminent){border-color:var(--border-color) !important}.sba{margin:64px 0 0 0;width:var(--sba-app-width);padding:var(--sba-app-padding);box-sizing:border-box;background:var(--body-bg-color);border-width:1px;border-color:var(--border-color);border-radius:6px;border-style:solid}.sba.inactive{display:none}.sba *,.sba *:before,.sba *:after{box-sizing:border-box}.sba *:focus{outline:0}.sba [data-ui=header]{display:flex;gap:8px}.sba [data-ui=header] .toolbar{display:flex;align-items:stretch;gap:1px}.sba [data-ui=header] .toolbar div{padding:10px 3px 2px 3px}.sba [data-ui=header] svg{width:11px;cursor:pointer;fill:currentColor}.sba .header{font-weight:bold;line-height:32px;flex-grow:2;text-indent:1px}.sba progress{-webkit-appearance:none;appearance:none;width:100%;border-radius:0;margin:0 0 2px 0;height:6px;padding:0;border:1px var(--border-color) solid;background:transparent;display:block}.sba progress.inactive{display:none}.sba progress::-webkit-progress-bar{background-color:transparent}.sba progress::-webkit-progress-value{background-color:var(--highlight-color);height:4px}.sba progress::-moz-progress-bar{background-color:var(--highlight-color)}.sba details{font-size:90%;margin-bottom:1px}.sba details.inactive{display:none}.sba summary{font-size:13px;line-height:20px;padding:1px 6px 0 6px;background:var(--area-bg-color);color:var(--text-color);cursor:pointer;position:relative;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sba .pane{border:1px solid var(--border-color);border-top:none;width:100%;font-size:85%;margin-bottom:2px}.sba table{border-collapse:collapse;table-layout:fixed}.sba tr.sba-preeminent{font-weight:bold;border-bottom:2px solid var(--highlight-color) !important}.sba tr.sba-completed{color:var(--invalid-color);font-weight:normal}.sba tr.sba-hidden{display:none}.sba td{border:1px solid var(--border-color);border-top:none;white-space:nowrap;text-align:center;padding:3px 0;width:26px}.sba td:first-of-type{text-align:left;width:auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:3px 3px}.sba [data-ui=scoreSoFar] tbody tr:first-child td,.sba [data-ui=spoilers] tbody tr:first-child td,.sba [data-ui=startingWith…] tbody tr:first-child td{font-weight:bold;font-size:92%}.sba [data-ui=startingWith…] tbody tr td:first-child{text-align:center;text-transform:uppercase}.sba [data-ui=footer]{color:currentColor;opacity:.6;font-size:10px;text-align:right;display:block;padding-top:8px}.sba [data-ui=footer]:hover{opacity:.8;text-decoration:underline}.sba ul.pane{padding:5px}.sba label{cursor:pointer;position:relative;line-height:19px;white-space:nowrap}.sba label input{position:relative;top:2px;margin:0 5px 0 0}[data-ui=spillTheBeans]{text-align:center;padding:14px 0;font-size:280%}[data-ui=spillTheBeans].inactive{display:none}[data-ui=launcher]{position:relative;z-index:1}[data-ui=launcher] .pane{position:absolute;background:var(--body-bg-color);border:1px var(--border-color) solid;top:55px;padding:5px;right:180px}[data-ui=launcher] li{position:relative;line-height:1.8;white-space:nowrap;cursor:pointer;overflow:hidden;display:block;padding:5px 25px 5px 38px;font-size:14px}[data-ui=launcher] li::before,[data-ui=launcher] li::after{position:absolute;display:block}[data-ui=launcher] li[data-icon=checkbox]::before{content:"";border:2px solid var(--text-color);opacity:.15;width:14px;height:14px;border-radius:3px;left:15px;top:10px}[data-ui=launcher] li[data-icon=checkbox][data-state=true]::after{content:"✔";color:var(--highlight-color);top:-3px;left:16px;font-size:20px}[data-ui=launcher] li[data-icon=warning]::before{content:"△";color:#c00;left:13px;top:-9px;font-size:27px;font-weight:bold}[data-ui=launcher] li[data-icon=warning]::after{content:"!";color:var(--text-color);top:7px;left:23px;font-weight:bold;font-size:12px}[data-ui=launcher] li[data-target=stepsToSuccess]{border-top:1px solid var(--border-color)}.sba-googlified .sb-anagram{cursor:pointer}.sba-googlified .sb-anagram:hover{text-decoration:underline;color:var(--link-hover-color)}.sba{margin:var(--sba-app-margin);width:var(--sba-app-width);padding:var(--sba-app-padding)}[data-sba-active=true] .sb-content-box{max-width:var(--sba-game-width);justify-content:space-between;position:relative}[data-sba-active=true] .sb-controls-box{max-width:calc(100vw - var(--sba-app-width))}[data-sba-active=true] .sba-container{position:absolute;top:50%;transform:translate(0, -50%);right:var(--sba-game-offset)}@media(min-width: 900px){[data-sba-active=true] .sb-content-box{padding:0 var(--sba-game-offset)}[data-sba-active=true] .sb-controls-box{max-width:none}[data-sba-active=true] .sba-container{position:static;transform:none}}.pz-game-field{background:inherit;color:inherit}.sb-wordlist-items-pag>li.sba-pangram{border-bottom:2px var(--highlight-color) solid}.sb-wordlist-items-pag>li.sb-anagram a{color:var(--invalid-color)}.pz-toolbar-button:hover,[data-ui=launcher] li:hover{background:var(--menu-hover-color);color:var(--text-color)}.sb-modal-scrim{z-index:6}.pz-desktop .sba details[open] summary:before{transform:rotate(-90deg);left:10px;top:1px}.pz-desktop .sba summary{list-style:none;padding:1px 15px 0 21px}.pz-desktop .sba summary::marker{display:none}.pz-desktop .sba summary:before{content:"❯";font-size:9px;position:absolute;display:inline-block;transform:rotate(90deg);transform-origin:center;left:7px;top:0}[data-sba-theme].pz-spelling-bee-congrats .sba-pop-up.left-aligned .sb-modal-content .sba-pangram{font-weight:700;border-bottom:2px var(--highlight-color) solid}[data-sba-theme].pz-spelling-bee-congrats .sba-pop-up.left-aligned .sb-modal-content .sba-modal-footer{text-align:right;border-top:1px solid var(--border-color);padding-top:10px;font-size:13px;display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;text-align:right;border-top:1px solid var(--border-color);padding-top:10px}[data-sba-theme].pz-spelling-bee-congrats .sba-pop-up.left-aligned .sb-modal-content .sba-modal-footer button{padding:6px 10px;margin:0}[data-sba-theme].pz-spelling-bee-congrats .left-aligned .sb-modal-content .sb-modal-body::after{background:linear-gradient(180deg, transparent 0%, var(--modal-bg-color) 56.65%, var(--body-bg-color) 100%)}@media(min-width: 768px){[data-sba-theme].pz-page .sba-pop-up.left-aligned .sb-modal-content .sb-modal-body{padding-right:56px}[data-sba-theme].pz-page .sba-pop-up.left-aligned .sb-modal-content .sb-modal-header{padding-right:56px}[data-sba-theme].pz-page .sba-pop-up.left-aligned .sb-modal-content .sba-modal-footer{text-align:right;border-top:1px solid var(--border-color);padding-top:10px;width:calc(100% - 112px);margin:-8px auto 15px}}@media(max-width: 767.98px){.sba [data-ui=spillTheBeans] .spill-title{display:none}.pz-mobile .sba-pop-up b{display:block}.pz-mobile .sba-pop-up i{margin-bottom:5px}.pz-mobile .sba-pop-up i::before{content:normal}}'}),t.on(d("destroy"),(()=>this.ui.remove())),this.add(),this.modifyMq()}}class U extends k{getTarget(){let t;return this.app.envIs("mobile")?t=a.$("#js-mobile-toolbar"):(t=a.div({content:a.$$("#portal-game-toolbar > span")}),a.$("#portal-game-toolbar").append(t)),t}run(t){return super.toggle()}constructor(t){super(t,"Launcher",""),this.target=this.getTarget();const e=["pz-toolbar-button__sba",this.app.envIs("mobile")?"pz-nav__toolbar-item":"pz-toolbar-button"],s=a.ul({classNames:["pane"],events:{click:t=>{const e=t.target.closest("li"),a=e.dataset.target===this.app.key?this.app:this.app.plugins.get(e.dataset.target),s=!a.getState();a.toggle(s),e.dataset.state=s,a===this.app&&(this.app.gameWrapper.dataset.sbaActive=s.toString())}},content:a.li({attributes:{title:this.app.title},data:{target:this.app.key,state:!!this.app.getState(),icon:"checkbox"},content:`Toggle ${o("title")}`})});this.ui=a.div({content:[o("title"),s],attributes:{role:"presentation"},classNames:e}),t.on(d("pluginsReady"),(t=>{t.detail.forEach(((t,e)=>{if(!t.canChangeState||t===this)return!1;s.append(a.li({attributes:{title:t.description},data:{target:e,state:!!t.getState(),icon:t.menuIcon},content:t.title}))}))})),t.on(d("destroy"),(()=>this.ui.remove()))}}new class extends y{getObserverArgs(){return{target:this.gameWrapper,options:{childList:!0,subtree:!0,attributes:!0}}}getGameState(){const t=a.$("#js-hook-pz-moment__welcome",this.gameWrapper),e=a.$(".sb-content-box",this.gameWrapper);return t?e&&e.classList.contains("sb-game-locked")?0:e.classList.contains("sb-game-locked")?void 0:1:-1}getSyncData(){let t=localStorage.getItem("sb-today");return t?(t=JSON.parse(t),t.id&&t.id===v()?t.words||[]:null):null}envIs(t){return document.body.classList.contains("pz-"+t)}async getResults(){let t=10;return await new Promise((e=>{const a=setInterval((()=>{const s=this.getSyncData();!s&&t||(e(s||[]),clearInterval(a)),t--}),300)}))}async waitForGameState(t){let e=50;return await new Promise((a=>{const s=setInterval((()=>{const r=this.getGameState();(!e||this.getGameState()>=t)&&(a(r),clearInterval(s)),e--}),300)}))}load(){if(this.isLoaded)return!1;this.observer=this.buildObserver(),this.modalWrapper=a.$(".sb-modal-wrapper",this.gameWrapper),this.resultList=a.$(".sb-wordlist-items-pag",this.gameWrapper),this.waitForGameState(1).then((()=>{this.add(),this.gameWrapper.dataset.sbaActive=this.getState(),this.registerPlugins(),this.trigger(d("refreshUi")),this.isLoaded=!0}))}buildObserver(){const t=new MutationObserver((t=>{t.forEach((t=>{if(!(t.target instanceof HTMLElement))return!1;switch(!0){case"attributes"===t.type&&t.target.classList.contains("sb-content-box"):document.body.dataset[d("hasOverlay")]=t.target.classList.contains("sb-expanded");break;case"childList"===t.type&&t.target.isSameNode(this.modalWrapper):document.body.dataset[d("hasOverlay")]=!!t.target.hasChildNodes();break;case"childList"===t.type&&t.target.classList.contains("sb-hive-input-content"):this.trigger(d("newInput"),t.target.textContent.trim());break;case"childList"===t.type&&t.target.isSameNode(this.resultList)&&!!t.addedNodes.length&&!!t.addedNodes[0].textContent.trim()&&t.addedNodes[0]instanceof HTMLElement:this.trigger(d("newWord"),t.addedNodes[0].textContent.trim())}}))})),e=this.getObserverArgs();return t.observe(e.target,e.options),t}buildUi(){const t={};t[d("destroy")]=()=>{this.observer.disconnect(),this.container.remove(),delete document.body.dataset[d("theme")]};const e=[o("prefix")];return!1===this.getState()&&e.push("inactive"),a.div({data:{id:this.key,version:o("version")},classNames:e,events:t})}registerPlugins(){return this.plugins=new Map,Object.values({DarkMode:S,Header:z,ProgressBar:C,ScoreSoFar:N,Spoilers:E,StartingWith:$,SpillTheBeans:_,HighlightPangrams:j,Googlify:A,Footer:P,Styles:D,Menu:U,StepsToSuccess:M,Surrender:O}).forEach((t=>{const e=new t(this);e.add(),this.plugins.set(e.key,e)})),this.trigger(d("pluginsReady"),this.plugins),this}add(){this.container.append(this.ui),a.$(".sb-content-box",this.gameWrapper).append(this.container)}constructor(t){super(o("label"),{canChangeState:!0,key:d("app")});const e=a.$(`[data-id="${this.key}"]`);e&&e.dispatchEvent(new Event(d("destroy"))),this.gameWrapper=t,this.ui=this.buildUi(),this.container=a.div({classNames:[d("container","d")]}),this.isLoaded=!1,this.getResults().then((t=>{b(this,t)})).then((()=>{this.waitForGameState(0).then((t=>{0===t?a.$(".pz-moment__button-wrapper .pz-moment__button.primary",this.gameWrapper).addEventListener("pointerup",(()=>{this.load()})):this.load()}))}))}}(a.$("#js-hook-game-wrapper"))}();