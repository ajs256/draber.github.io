!function(){"use strict";const t={$:(t,e=null)=>"string"==typeof t?(e||document).querySelector(t):t||null,$$:(t,e=null)=>[].slice.call((e||document).querySelectorAll(t)),toNode:t=>{const e=document.createDocumentFragment();if(void 0===t)return e;if(t instanceof Element||t instanceof DocumentFragment)return t;if("number"==typeof t&&(t=t.toString()),"string"==typeof t||t instanceof String){t=(new DOMParser).parseFromString(t,"text/html").body.childNodes}if("function"==typeof t.forEach)return Array.from(t).forEach((t=>{e.append(t)})),e;console.error("Expected Element|DocumentFragment|Iterable|String|HTMLCode, got",t)},empty:t=>{for(;t.lastChild;)t.lastChild.remove();return t.textContent="",t}},e=function({tag:e,content:a,attributes:o={},style:s={},data:r={},events:n={},classNames:i=[],isSvg:l}={}){const d=l?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);"a"===e&&o.href&&!a&&(a=new URL(o.href).hostname);for(let[t,e]of Object.entries(o))l?d.setAttributeNS(null,t,e.toString()):"role"===t||t.startsWith("aria-")?d.setAttribute(t,e):!1!==e&&(d[t]=e.toString());for(let[t,e]of Object.entries(r))e=e.toString(),d.dataset[t]=e;for(const[t,e]of Object.entries(n))d.addEventListener(t,e,!1);return Object.assign(d.style,s),i.length&&d.classList.add(...i),void 0!==a&&d.append(t.toNode(a)),d},a=new Proxy(t,{get:(t,a)=>function(){const o=Array.from(arguments);return Object.prototype.hasOwnProperty.call(t,a)&&"function"==typeof t[a]?(t[a].bind(t),t[a].apply(null,o)):e({tag:a,...o.shift()})}});const o={version:"4.0.0",label:"Spelling Bee Assistant",title:"Assistant",url:"https://spelling-bee-assistant.app/",prefix:"sba",repo:"draber/draber.github.io.git",targetUrl:"https://www.nytimes.com/puzzles/spelling-bee",mobileThreshold:"900",options:JSON.parse(localStorage.getItem("sba-settings")||"{}")},s=()=>{localStorage.setItem(o.prefix+"-settings",JSON.stringify(o.options))};o.options.version&&o.options.version!==o.version&&(o.options.oldVersion=o.options.version),o.options.version=o.version,s();var r=t=>{let e=Object.create(o);for(let a of t.split(".")){if(void 0===e[a])return;e=e[a]}return e},n=(t,e)=>{const a=t.split("."),r=a.pop();let n=o;for(let t of a){if(n[t]||(n[t]={}),"[object Object]"!==Object.prototype.toString.call(n))return console.error(`${t} is not of the type Object`),!1;n=n[t]}n[r]=e,s()};const i=r("prefix"),l=t=>t.replace(/[_-]+/," ").replace(/(?:^[\w]|[A-Z]|\b\w|\s+)/g,(function(t,e){return 0==+t?"":0===e?t.toLowerCase():t.toUpperCase()})),d=(t="",e="c")=>{switch(e){case"c":return l(i+"_"+t);case"d":return(t=>t.replace(/[\W_]+/g," ").split(/ |\B(?=[A-Z])/).map((t=>t.toLowerCase())).join("-"))(i+t.charAt(0).toUpperCase()+t.slice(1));default:return i+t}};let p;const c=window.gameData.today;let h;const u=()=>{p.foundPangrams=p.foundTerms.filter((t=>p.pangrams.includes(t))),p.remainders=p.answers.filter((t=>!p.foundTerms.includes(t))),h.trigger(d("refreshUi"))};var b=(t,e)=>{h=t,(t=>{p={answers:c.answers,pangrams:c.pangrams,letters:c.validLetters,foundTerms:t},u()})(e),h.on(d("newWord"),(t=>{var e;e=t.detail,p.foundTerms.push(e),u()}))},g=t=>p[t],m=t=>p[t].length,f=t=>{const e=p[t];let a=0;return e.forEach((t=>{p.pangrams.includes(t)?a+=t.length+7:t.length>4?a+=t.length:a+=1})),a},v=()=>c.id,x=()=>c.displayDate,y=()=>c.centerLetter;class w{getState(){const t=r(`options.${this.key}`);return void 0!==t?t:this.defaultState}setState(t){return this.canChangeState&&n(`options.${this.key}`,t),this}toggle(t){return this.canChangeState?(this.setState(t),this.hasUi()&&this.ui.classList.toggle("inactive",!t),this):this}hasUi(){return this.ui instanceof HTMLElement}on(t,e){return this.hasUi()&&this.ui.addEventListener(t,e),this}trigger(t,e){return this.hasUi()&&this.ui.dispatchEvent(e?new CustomEvent(t,{detail:e}):new Event(t)),this}constructor(t,{key:e,canChangeState:a,defaultState:o}={}){if(!t)throw new TypeError(`Missing 'title' from ${this.constructor.name}`);this.title=t,this.key=e||l(t),this.canChangeState=void 0!==a&&a,this.defaultState=void 0===o||o,this.setState(this.getState()),this.ui=null}}class k extends w{attach(){return this.hasUi()?(this.ui.dataset.ui=this.key,(this.target||this.app.ui)[this.addMethod](this.ui),this):this}add(){return this.attach()}run(t){return this}constructor(t,e,a,{key:o,canChangeState:s,defaultState:r,menuIcon:n,runEvt:i,addMethod:l}={}){super(e,{key:o,canChangeState:s,defaultState:r}),this.target,this.description=a||"",this.app=t,this.addMethod=l||"append",this.menuIcon=n||"checkbox",i&&this.app.on(i,(t=>{this.run(t)}))}}class S extends k{toggle(t){return super.toggle(t),document.body.dataset[d("theme")]=t?"dark":"light",this}constructor(t){super(t,"Dark Mode","Applies a dark theme to this page",{canChangeState:!0,defaultState:!1}),this.toggle(this.getState())}}class z{enableKeyClose(){document.addEventListener("keyup",(t=>{this.app.popupCloser=a.$(".sb-modal-wrapper .sb-modal-close",this.app.gameWrapper),this.app.popupCloser&&"Escape"===t.code&&this.app.popupCloser.click(),delete this.app.popupCloser}))}getTarget(){const t=d("popup-container","d");let e=a.$(`[data-ui="${t}"]`);return e||(e=a.template({data:{ui:t}}),a.$("body").append(e)),e}create(){return a.div({classNames:["sb-modal-frame","left-aligned",d("pop-up","d")],attributes:{role:"button"},data:{ui:this.key},events:{click:t=>{t.stopPropagation()}},content:[a.div({classNames:["sb-modal-top"],content:a.div({attributes:{role:"button"},classNames:["sb-modal-close"],content:"×",events:{click:()=>{this.toggle(!1)}}})}),a.div({classNames:["sb-modal-content"],content:[a.div({classNames:["sb-modal-header"],content:[this.parts.title,this.parts.subtitle]}),this.parts.body,this.parts.footer]})]})}setContent(t,e){return this.parts[t]?(this.parts[t]=a.empty(this.parts[t]),this.parts[t].append(a.toNode(e)),this):(console.error(`Unknown target ${t}`),this)}toggle(t){const e=a.$(".sb-modal-close",this.app.modalWrapper);return!t&&e&&e.click(),t?(this.app.modalWrapper.append(this.ui),this.modalSystem.classList.add("sb-modal-open")):(this.getTarget().append(this.ui),this.modalSystem.classList.remove("sb-modal-open")),this}constructor(t,e){this.key=e,this.app=t,this.state=!1,this.modalSystem=this.app.modalWrapper.closest(".sb-modal-system"),this.parts={title:a.h3({classNames:["sb-modal-title"]}),subtitle:a.p({classNames:["sb-modal-message"]}),body:a.div({classNames:["sb-modal-body"]}),footer:a.div({classNames:["sb-modal-message","sba-modal-footer"],content:[a.a({content:r("label"),attributes:{href:r("url"),target:"_blank"}})]})},this.ui=this.create(),this.enableKeyClose(),this.getTarget().append(this.ui)}}class C extends k{toggle(t){a.$$("[data-sba-theme]").forEach((e=>{e.style.setProperty("--dhue",t.hue),e.style.setProperty("--dsat",t.sat+"%")})),super.toggle(t)}display(){this.popup.toggle(!0)}constructor(t){super(t,"Dark Mode Colors","Select your favorite color scheme for the Dark Mode.",{canChangeState:!0,defaultState:{hue:0,sat:0}}),this.menuAction="popup",this.menuIcon="null";const e=a.ul({classNames:[d("swatches","d")]});for(let t=0;t<360;t+=30){const o=0===t?0:25;e.append(a.li({content:[a.input({attributes:{name:"color-picker",type:"radio",value:t,checked:t===this.getState().hue,id:d("h"+t)},events:{change:()=>{this.toggle({hue:t,sat:o})}}}),a.label({attributes:{htmlFor:d("h"+t)},style:{background:`hsl(${t}, ${o}%, 22%)`}})]}))}this.menuIcon="null",this.popup=new z(this.app,this.key).setContent("title",this.title).setContent("subtitle",this.description).setContent("body",a.div({classNames:[d("color-selector","d")],content:[e,a.div({classNames:["hive"],content:[a.svg({classNames:["hive-cell","outer"],attributes:{viewBox:"0 0 24 21"},isSvg:!0,content:[a.path({classNames:["cell-fill"],isSvg:!0,attributes:{d:"M18 21H6L0 10.5 6 0h12l6 10.5z"}}),a.text({classNames:["cell-letter"],attributes:{x:"50%",y:"50%",dy:"0.35em"},isSvg:!0,content:"s"})]})]})]})),this.popup.ui.dataset[d("theme")]="dark",this.toggle(this.getState())}}class N extends k{constructor(t){super(t,r("title"),"",{key:"header"}),this.ui=a.div({content:this.title})}}class A extends k{run(t){let e=100*f("foundTerms")/f("answers");return e=Math.min(Number(Math.round(e+"e2")+"e-2"),100),this.ui.value=e,this.ui.textContent=e+"%",this.ui.title=`Progress: ${e}%`,this}constructor(t){super(t,"Progress Bar","Displays your progress as a yellow bar",{canChangeState:!0,runEvt:d("refreshUi"),addMethod:"before"}),this.ui=a.progress({attributes:{max:100}}),this.target=a.$(".sb-wordlist-heading",this.app.gameWrapper),this.toggle(this.getState())}}class L extends k{run(){this.pane=a.empty(this.pane);const t=a.tbody();return this.getData().forEach(((e,o)=>{const s=[];for(const[t,a]of Object.entries(this.cssMarkers))a(e,o)&&s.push(d(t,"d"));t.append(a.tr({classNames:s,content:e.map((t=>a.td({content:t})))}))})),this.pane.append(t),this}getPane(){return this.pane}constructor(t,e,o,{canChangeState:s=!0,defaultState:r=!0,cssMarkers:n={}}={}){super(t,e,o,{canChangeState:s,defaultState:r}),t.on(d("refreshUi"),(()=>{this.run()})),this.cssMarkers=n,this.pane=a.table({classNames:["pane",d("dataPane","d")]})}}class M extends L{getData(){const t=["foundTerms","remainders","answers"];return[["","✓","?","∑"],["Words"].concat(t.map((t=>m(t)))),["Points"].concat(t.map((t=>f(t))))]}constructor(t){super(t,"Score","The number of words and points and how many have been found"),this.ui=a.details({attributes:{open:!0},content:[a.summary({content:this.title}),this.getPane()]})}}class T extends k{run(t){let e="🙂";t.detail?g("remainders").filter((e=>e.startsWith(t.detail))).length||(e="🙁"):e="😐",this.ui.textContent=e}constructor(t){super(t,"Spill the beans","An emoji that shows if the last letter was right or wrong",{canChangeState:!0,runEvt:d("newInput"),addMethod:"prepend"}),this.ui=a.div({content:"😐"}),this.target=a.$(".sb-controls",this.app.gameWrapper),this.toggle(!1)}}class E extends L{getData(){const t={},e=m("pangrams"),a=m("foundPangrams"),o=[["","✓","?","∑"]];g("answers").forEach((e=>{t[e.length]=t[e.length]||{found:0,missing:0,total:0},g("foundTerms").includes(e)?t[e.length].found++:t[e.length].missing++,t[e.length].total++}));let s=Object.keys(t);return s.sort(((t,e)=>t-e)),s.forEach((e=>{o.push([e+" "+(e>1?"letters":"letter"),t[e].found,t[e].missing,t[e].total])})),o.push(["Pangrams",a,e-a,e]),o}constructor(t){super(t,"Letter count","The number of words by length, also the number of pangrams",{cssMarkers:{completed:(t,e)=>e>0&&0===t[2],preeminent:(t,e)=>e>0&&"Pangrams"===t[0]}}),this.ui=a.details({content:[a.summary({content:this.title}),this.getPane()]}),this.toggle(this.getState())}}class P extends L{getData(){const t={},e=g("answers").sort(((t,e)=>t.startsWith(this.centerLetter)?-1:e.startsWith(this.centerLetter)?1:t<e?-1:1)),a=g("remainders"),o={foundTerms:0,remainders:0,total:0};e.forEach((e=>{const s=e.charAt(0);void 0===t[s]&&(t[s]={...o}),a.includes(e)?t[s].remainders++:t[s].foundTerms++,t[s].total++}));const s=[["","✓","?","∑"]];for(let[e,a]of Object.entries(t))a=Object.values(a),a.unshift(e),s.push(a);return s}constructor(t){super(t,"First letter","The number of words by first letter",{cssMarkers:{completed:(t,e)=>e>0&&0===t[2],preeminent:(t,e)=>e>0&&t[0]===y()}}),this.ui=a.details({content:[a.summary({content:this.title}),this.getPane()]}),this.toggle(this.getState())}}class j extends L{display(){const t=f("foundTerms"),e=f("answers"),o=this.getPointsToNextTier(),s=100*t/e;let r;return r=o?a.span({content:["You are currently at ",a.b({content:t+"/"+e})," points or ",a.b({content:Math.min(Number(Math.round(s+"e2")+"e-2"),100)+"%"}),". You need ",a.b({content:o-t})," more points to go to the next level."]}):a.span({content:["Congratulations, you’ve found all ",a.b({content:t})," points!"]}),this.popup.setContent("subtitle",a.span({content:r})).setContent("body",this.getPane()).toggle(!0),this}getData(){const t=f("answers");return[["Beginner",0],["Good Start",2],["Moving Up",5],["Good",8],["Solid",15],["Nice",25],["Great",40],["Amazing",50],["Genius",70],["Queen Bee",100]].map((e=>[e[0],Math.round(e[1]/100*t),e[1]]))}getCurrentTier(){return this.getData().filter((t=>t[1]<=f("foundTerms"))).pop()[1]}getPointsToNextTier(){const t=this.getData().filter((t=>t[1]>f("foundTerms"))).shift();return t?t[1]:null}constructor(t){super(t,"Your Progress","The number of points required for each level",{cssMarkers:{completed:t=>t[1]<f("foundTerms")&&t[1]!==this.getCurrentTier(),preeminent:t=>t[1]===this.getCurrentTier()}}),this.popup=new z(this.app,this.key).setContent("title",this.title),this.menuAction="popup",this.menuIcon="null"}}class $ extends k{display(){const t=g("foundTerms"),e=g("pangrams"),o=a.ul({classNames:["sb-modal-wordlist-items"]});return g("answers").forEach((s=>{o.append(a.li({classNames:e.includes(s)?[d("pangram","d")]:[],content:[a.span({classNames:t.includes(s)?["check","checked"]:["check"]}),a.span({classNames:["sb-anagram"],content:s})]}))})),this.popup.setContent("body",[a.div({content:g("letters").join(""),classNames:["sb-modal-letters"]}),o]).toggle(!0),this}constructor(t){super(t,"Today’s Answers","Reveals the solution of the game",{canChangeState:!0,defaultState:!1,key:"todaysAnswers"}),this.marker=d("resolved","d"),this.popup=new z(this.app,this.key).setContent("title",this.title).setContent("subtitle",x()),this.menuAction="popup",this.menuIcon="warning"}}class I extends k{toggle(t){return super.toggle(t),this.run()}run(t){const e=g("pangrams"),o=t&&t.detail?t.detail:this.app.resultList;return a.$$("li",o).forEach((t=>{const o=t.textContent;(e.includes(o)||a.$(".pangram",t))&&t.classList.toggle(this.marker,this.getState())})),this}constructor(t){super(t,"Highlight Pangrams","",{canChangeState:!1,runEvt:d("refreshUi")}),this.marker=d("pangram","d"),this.app.on(d("yesterday"),(t=>{this.run(t)})),this.run()}}class D extends k{toggle(t){return super.toggle(t),this.run()}listener(t){return!(!t.target.classList.contains("sb-anagram")||!t.target.closest(".sb-anagram"))&&(0===t.button?window.open(`https://www.google.com/search?q=${t.target.textContent}`,d()):void 0)}run(){const t=(this.getState()?"add":"remove")+"EventListener";return[this.app.modalWrapper,this.app.resultList].forEach((e=>{e[t]("pointerup",this.listener),e.classList.toggle(d("googlified","d"),this.getState())})),this}constructor(t){super(t,"Googlify","Link all result terms to Google",{canChangeState:!1}),this.run()}}class _ extends k{modifyMq(){let t,e;for(let t of document.styleSheets)if(t.href&&t.href.startsWith("https://www.nytimes.com/games-assets/v2/spelling-bee")){e=t;break}if(t=e.rules,!t)return;const a="min-width: 768px",o=a.replace("768","900"),s=`data-${d("active","d")}`,r=`[${s}="false"]`,n=`[${s}="true"]`,i=new RegExp(s,"g");let l=[],p=t.length;for(;p--;)t[p]instanceof CSSMediaRule&&t[p].conditionText.includes(a)&&!t[p].cssText.includes(".sb-modal")&&(t[p].cssRules.forEach((t=>{const e=t.selectorText.split(",").map((t=>`${s} ${t.trim()}`)).join(", ");l.push(t.cssText.replace(t.selectorText,e))})),e.deleteRule(p));l=l.join("");const c=`@media (${a}) { ${l.replace(i,r)} }`,h=`@media (${o}) { ${l.replace(i,n)} }`;e.insertRule(c),e.insertRule(h)}constructor(t){super(t,"Styles",""),this.target=a.$("head"),this.ui=a.style({content:'[data-sba-theme]{--dhue: 0;--dsat: 0%;--link-hue: 206;--shadow-light-color: hsl(49, 96%, 50%, 0.35);--shadow-dark-color: hsl(49, 96%, 50%, 0.7);--highlight-text-color: hsl(0, 0%, 0%)}[data-sba-theme=light]{--highlight-bg-color:#f7db22;--text-color:#000;--site-text-color:rgba(0,0,0,.9);--body-bg-color:#fff;--modal-bg-color:rgba(255,255,255,.85);--border-color:#dbdbdb;--area-bg-color:#e6e6e6;--invalid-color:#adadad;--menu-hover-color:#f5f5f5;--card-color:rgba(250,5,5,.1);--link-color:hsl(var(--link-hue), 45%, 38%);--link-visited-color:hsl(var(--link-hue), 45%, 53%);--link-hover-color:hsl(var(--link-hue), 45%, 53%);--success-color:#2ca61c}[data-sba-theme=dark]{--highlight-bg-color:#facd05;--text-color:hsl(var(--dhue), var(--dsat), 85%);--site-text-color:hsl(var(--dhue), var(--dsat), 100%, 0.9);--body-bg-color:hsl(var(--dhue), var(--dsat), 7%);--modal-bg-color:hsl(var(--dhue), var(--dsat), 7%, 0.85);--border-color:hsl(var(--dhue), var(--dsat), 20%);--area-bg-color:hsl(var(--dhue), var(--dsat), 22%);--invalid-color:hsl(var(--dhue), var(--dsat), 50%);--menu-hover-color:hsl(var(--dhue), var(--dsat), 22%);--card-color:hsl(var(--dhue), var(--dsat), 22%);--link-color:hsl(var(--link-hue), 90%, 64%);--link-visited-color:hsl(var(--link-hue), 90%, 76%);--link-hover-color:hsl(var(--link-hue), 90%, 76%);--success-color:#64f651}body{background:var(--body-bg-color);color:var(--text-color)}body .pz-game-field{background:var(--body-bg-color);color:var(--text-color)}body .pz-game-wrapper{background:var(--body-bg-color) !important;color:var(--text-color)}body .pz-game-wrapper .sb-modal-message a{color:var(--link-color)}body .pz-game-wrapper .sb-modal-message a:visited{color:var(--link-visited-color)}body .pz-game-wrapper .sb-modal-message a:hover{color:var(--link-hover-color)}body .pz-game-wrapper .sb-progress-marker .sb-progress-value,body .pz-game-wrapper .hive-cell:first-child .cell-fill{background:var(--highlight-bg-color);fill:var(--highlight-bg-color);color:var(--highlight-text-color)}body .pz-game-wrapper .sba-color-selector .hive .hive-cell .cell-fill,body .pz-game-wrapper .hive-cell .cell-fill{fill:var(--area-bg-color)}body[data-sba-theme=dark] .sb-message{background:var(--area-bg-color)}body[data-sba-theme=dark] .hive-action__shuffle{position:relative}body[data-sba-theme=dark] .sb-toggle-icon,body[data-sba-theme=dark] .sb-kebob .sb-bob-arrow,body[data-sba-theme=dark] .hive-action__shuffle{background-position:-1000px}body[data-sba-theme=dark] .sb-toggle-icon:after,body[data-sba-theme=dark] .sb-kebob .sb-bob-arrow:after,body[data-sba-theme=dark] .hive-action__shuffle:after{content:"";opacity:.85;top:0;left:0;bottom:0;right:0;position:absolute;z-index:0;filter:invert(1);background-image:inherit;background-repeat:inherit;background-position:center;background-size:inherit}#js-logo-nav rect{fill:var(--body-bg-color)}#js-logo-nav path{fill:var(--text-color)}.pz-moment__loading{color:#000}.pz-nav__hamburger-inner,.pz-nav__hamburger-inner::before,.pz-nav__hamburger-inner::after{background-color:var(--text-color)}.pz-nav{width:100%;background:var(--body-bg-color)}.pz-modal__button.white,.pz-footer,.pz-moment,.sb-modal-scrim{background:var(--modal-bg-color) !important;color:var(--text-color) !important}.pz-modal__button.white .pz-moment__button.secondary,.pz-footer .pz-moment__button.secondary,.pz-moment .pz-moment__button.secondary,.sb-modal-scrim .pz-moment__button.secondary{color:#fff}.sb-modal-wrapper .sb-modal-frame{border:1px solid var(--border-color);background:var(--body-bg-color);color:var(--text-color)}.sb-modal-wrapper .pz-modal__title,.sb-modal-wrapper .sb-modal-close{color:var(--text-color)}.pz-modal__button.white:hover{background:var(--area-bg-color)}.sb-input-invalid{color:var(--invalid-color)}.sb-toggle-expand{box-shadow:none}.sb-input-bright,.sb-progress-dot.completed::after{color:var(--highlight-bg-color)}.cell-fill{stroke:var(--body-bg-color)}.cell-letter{fill:var(--text-color)}.hive-cell.center .cell-letter{fill:var(--highhlight-text-color)}.hive-action{background-color:var(--body-bg-color);color:var(--text-color)}.hive-action.push-active{background:var(--menu-hover-color)}.pz-spelling-bee-congrats .sb-modal-wordlist-items li,.sb-wordlist-items-pag>li,.pz-ad-box,.pz-game-toolbar,.pz-spelling-bee-wordlist .hive-action,.sb-wordlist-box,.sb-message{border-color:var(--border-color)}.sb-toggle-expand{background:var(--body-bg-color)}.sb-progress-line,.sb-progress-dot::after{background:var(--border-color)}.sb-bob{background-color:var(--border-color)}.sb-bob.active{background-color:var(--text-color)}.sba{background:var(--body-bg-color);border:1px var(--border-color) solid;border-radius:6px}.sba *:focus{outline:0}.sba ::selection{background:transparent}.sba details{font-size:90%;margin-bottom:1px}.sba summary{font-size:13px;line-height:20px;padding:1px 6px 0 6px;background:var(--area-bg-color);color:var(--text-color);cursor:pointer;position:relative;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sba .pane{border:1px solid var(--border-color);border-top:none;width:100%;font-size:85%;margin-bottom:2px}[data-ui].inactive{display:none}.sba-data-pane{border-collapse:collapse;table-layout:fixed}.sba-data-pane .sba-preeminent{font-weight:bold;border-bottom:2px solid var(--highlight-bg-color) !important}.sba-data-pane .sba-completed{color:var(--invalid-color);font-weight:normal}.sba-data-pane .sba-hidden{display:none}.sba-data-pane td{border:1px solid var(--border-color);border-top:none;white-space:nowrap;text-align:center;padding:3px 0;width:26px}.sba-data-pane td:first-of-type{text-align:left;width:auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:3px 3px}[data-ui=yourProgress] b{font-weight:700}[data-ui=yourProgress] .sba-data-pane{margin-left:5px;max-width:300px}[data-ui=yourProgress] .sba-data-pane td{border:none}[data-ui=yourProgress] .sba-data-pane tr.sba-completed{color:var(--text-color)}[data-ui=yourProgress] .sba-data-pane tr td:nth-child(n+2){text-align:right;width:80px}[data-ui=yourProgress] .sba-data-pane tr td:nth-child(2)::after{content:" pts."}[data-ui=yourProgress] .sba-data-pane tr td:last-child::after{content:"%"}[data-ui=header]{font-weight:bold;line-height:32px;flex-grow:2;text-indent:1px}[data-ui=score] tbody tr:first-child td,[data-ui=letterCount] tbody tr:first-child td,[data-ui=firstLetter] tbody tr:first-child td{font-weight:bold;font-size:92%}[data-ui=firstLetter] tbody tr td:first-child{text-align:center;text-transform:uppercase}[data-ui=progressBar]{-webkit-appearance:none;appearance:none;width:100%;border-radius:0;margin:0;height:6px;padding:0;background:transparent;display:block;border-bottom:1px var(--border-color) solid}[data-ui=progressBar]::-webkit-progress-bar{background-color:transparent}[data-ui=progressBar]::-webkit-progress-value{background-color:var(--highlight-bg-color);height:4px}[data-ui=progressBar]::-moz-progress-bar{background-color:var(--highlight-bg-color)}[data-ui=spillTheBeans]{text-align:center;padding:14px 0;font-size:38px;margin-top:-24px}[data-ui=menu]{position:relative;z-index:1}[data-ui=menu] .pane{color:var(--text-color);background:var(--body-bg-color);border:1px var(--border-color) solid;padding:5px}[data-ui=menu] li{position:relative;line-height:1.8;white-space:nowrap;cursor:pointer;overflow:hidden;display:block;padding:5px 9px 5px 28px;font-size:14px}[data-ui=menu] li::before,[data-ui=menu] li::after{position:absolute;display:block}[data-ui=menu] li[data-icon=checkmark].checked::after{content:"✔";color:var(--highlight-bg-color);top:3px;left:7px;font-size:16px}[data-ui=menu] li[data-icon=warning]::before{content:"";background:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyLjAwNiAyLjI1NWwxMS4yNTUgMTkuNDlILjc1NXoiIGZpbGw9IiNmOGNkMDUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48cGF0aCBkPSJNMTMuNDQxIDkuMDAybC0uMzE3IDcuMzA2aC0yLjI0N2wtLjMxNy03LjMwNnptLS4wNDggMTAuMjYyaC0yLjc4NXYtMS44MmgyLjc4NXoiLz48L3N2Zz4=) center center/contain no-repeat;left:3px;top:6px;width:20px;height:20px}[data-ui=menu] li[data-target=darkModeColors],[data-ui=menu] li[data-icon=sba]{border-top:1px solid var(--border-color)}[data-ui=menu] li[data-icon=sba]{color:currentColor}[data-ui=menu] li[data-icon=sba]::before{content:"";background:url(data:image/webp;base64,UklGRkYCAABXRUJQVlA4WAoAAAAQAAAAFwAAFwAAQUxQSLgAAAABgFpt2/LmVbGJI8u8QgaIZSxqxgEYFTM7VMzMNEBPB2gVcx/xff/7/4UBImIC6F+16CWBxZsmlmH+9a7HROR4BxDmdADArZOOAKCdsyTgOguxkFMokb/oObTDyRBbN/kk+yoitfMAvr/xVevlJa5eoNzKaQN/S6dQC/Eb+PwScCQLQv1crKykJnqiAd5X9y46SrVYJXFQg5CERlSVk2LlF+s1n5iu/geF+14r8Y2x+ompsdqokf4uVlA4IGgBAABwBwCdASoYABgAPpE+m0kloyKhKAqosBIJbAAjwDeRZaSiFfn3Zr1QP9Ud0ADEskPPzxJU2pre8kHbnjqgPRfZb8zq4AD9IaAZD2vQgXhhU4vU6iI9307byI0qRvcdYUVqITfvs+c25tJHp68Tb8QbbjuwTz0j+xXnVHcdq1O53Cem6tFr6zIo8VPHzofJrvlKQnvp1W5bdpH3HE+2rDOikrPkzD5qdR91khmLUr2/65qN81K7n/5Ztjb/URQJxilNBdj/22TMy3S5+24re6Kkfvbzc9n/kNAlBuAaKYxSAgHTAELvJElqGMJ9psshwQ9Hinh1y4MVKzbf8UDf/8aFRjwHnN+c4w1Zb8LpKYQTgVuzyDsB7crn5PhK9sLJaU7CApsBz7CTzw1L6VpU0HoDsNv54wX6rtilmqIwjJzvnBL5H2aH/M7tuhCNyahJ+EDMv/cyE4Kqn918j7n693a1ovztxeo8AAA=) center center/contain no-repeat;left:5px;top:6px;width:20px;height:20px}[data-ui=menu] li[data-icon=sba]:hover{color:var(--link-hover-color);text-decoration:underline}.sba-color-selector{display:flex;justify-content:space-between;gap:10px}.sba-color-selector svg{width:120px;height:120px;display:block}[data-ui=darkModeColors] .hive{width:auto;padding:0;flex-grow:2;display:flex}[data-ui=darkModeColors] .hive-cell{position:static;margin:auto;border:1px solid var(--border-color);padding:20px;width:168px;height:100%;border-radius:6px}[data-ui=darkModeColors] .cell-letter{font-size:8px;font-weight:600}.sba-swatches{display:flex;flex-wrap:wrap;list-style:none;justify-content:space-around;padding:0;width:220px}.sba-swatches li{position:relative;overflow:hidden;margin-bottom:5px}.sba-swatches label{border:1px var(--border-color) solid;display:block;width:50px;height:50px;overflow:hidden;cursor:pointer}.sba-swatches input{position:absolute;left:-100px}.sba-swatches input:checked~label{border-color:var(--highlight-bg-color)}.sba-googlified .sb-anagram{cursor:pointer}.sba-googlified .sb-anagram:hover{text-decoration:underline;color:var(--link-hover-color)}#portal-game-toolbar [role=presentation]::selection{background:transparent}.pz-spelling-bee-congrats .sb-modal-wordlist-items li .check.checked{border:none;height:auto;transform:none}.pz-spelling-bee-congrats .sb-modal-wordlist-items li .check.checked::after{position:relative;content:"✔";color:var(--highlight-bg-color);top:4px;font-size:16px}.pz-spelling-bee-congrats .sb-modal-header .sb-modal-letters{position:relative;top:-5px}.pz-toolbar-button:hover,[data-ui=menu] li:hover{background:var(--menu-hover-color);color:var(--text-color)}[data-ui=grid] table{border-top:1px solid var(--border-color);table-layout:fixed;width:100%}[data-ui=grid] tbody tr:first-child td,[data-ui=grid] tbody tr:last-child td{font-weight:bold;text-transform:uppercase}[data-ui=grid] tbody tr td{width:auto;font-size:14px;padding:5px 0 !important}[data-ui=grid] tbody tr td:last-of-type,[data-ui=grid] tbody tr td:first-of-type{text-align:center;font-weight:bold}[data-ui=grid] tbody tr td:first-of-type{border-right:2px solid var(--highlight-bg-color) !important}[data-ui=grid] tbody tr td:last-of-type{border-left:2px solid var(--highlight-bg-color) !important}[data-ui=grid] tbody tr:last-of-type{border-top:2px solid var(--highlight-bg-color) !important}.pz-desktop .sba details[open] summary:before{transform:rotate(-90deg);left:10px;top:1px}.pz-desktop .sba summary{list-style:none;padding:1px 15px 0 21px}.pz-desktop .sba summary::marker{display:none}.pz-desktop .sba summary:before{content:"❯";font-size:9px;position:absolute;display:inline-block;transform:rotate(90deg);transform-origin:center;left:7px;top:0}[data-sba-theme].pz-spelling-bee-congrats .sb-wordlist-items-pag>li.sba-pangram,[data-sba-theme].pz-spelling-bee-congrats .sb-modal-wordlist-items>li.sba-pangram{font-weight:700;border-bottom:2px var(--highlight-bg-color) solid}[data-sba-theme].pz-spelling-bee-congrats .sba-pop-up.left-aligned .sb-modal-content .sba-modal-footer{text-align:right;font-size:13px;border-top:1px solid var(--border-color);padding:10px 10px 0 10px}[data-sba-theme].pz-spelling-bee-congrats .left-aligned .sb-modal-content::after{background:linear-gradient(180deg, transparent 0%, var(--modal-bg-color) 56.65%, var(--body-bg-color) 100%)}.sba-container{display:none}.sba{margin:var(--sba-app-margin);width:var(--sba-app-width);padding:var(--sba-app-padding);box-sizing:border-box}.sba *,.sba *:before,.sba *:after{box-sizing:border-box}[data-ui=menu] .pane{position:absolute;top:0;right:-10000px}[data-sba-submenu=true] .sba{position:relative;left:-167px;top:-175px}[data-sba-submenu=true] .pz-game-toolbar{position:relative;z-index:4}[data-sba-submenu=true] [data-ui=menu] .pane{right:-16px;top:49px}[data-sba-submenu=true] .sba{left:-163px;top:0}[data-sba-submenu=true].pz-desktop .pane{right:-16px;top:55px}[data-sba-active=true]{--sba-app-width: 138px;--sba-app-padding: 0 5px 5px;--sba-app-margin: 0;--sba-game-offset: 12px;--sba-game-width: 1256px;--sba-mobile-threshold: 900px}[data-sba-active=true] .sba-container{display:block;position:absolute;top:50%;transform:translate(0, -50%);right:var(--sba-game-offset);z-index:1}[data-sba-active=true][data-sba-submenu=true] .sba-container{top:0;height:0}[data-sba-active=true] .sb-expanded .sba-container{visibility:hidden;pointer-events:none}[data-sba-active=true] .sb-content-box{max-width:var(--sba-game-width);justify-content:space-between;position:relative}[data-sba-active=true] .sb-controls-box{max-width:calc(100vw - var(--sba-app-width))}[data-sba-active] .pz-game-toolbar .pz-row{padding:0}@media(min-width: 516px){[data-sba-active] .pz-game-toolbar .pz-row{padding:0 12px}[data-sba-active] .sba{left:-175px}}@media(min-width: 900px){[data-sba-submenu=true] [data-ui=menu] .pane{right:0;top:55px}[data-sba-active=true]{--sba-app-width: 160px;--sba-app-padding: 0 8px 8px;--sba-app-margin: 65px 0 0 0}[data-sba-active=true] .sb-content-box{padding:0 var(--sba-game-offset)}[data-sba-active=true] .sb-controls-box{max-width:none}[data-sba-active=true] .sba-container{position:static;transform:none}[data-sba-active=true] .sb-expanded .sba-container{z-index:1}[data-sba-active=true][data-sba-submenu=true] .sba{left:-191px;top:-65px}}@media(min-width: 1298px){[data-sba-active=true][data-sba-submenu=true] .sba{left:-179px}}@media(min-width: 768px){[data-sba-theme].pz-page .sba-pop-up.left-aligned .sb-modal-content .sb-modal-body{padding-right:56px}[data-sba-theme].pz-page .sba-pop-up.left-aligned .sb-modal-content .sb-modal-header{padding-right:56px}[data-sba-theme].pz-page .sba-pop-up.left-aligned .sb-modal-content .sba-modal-footer{text-align:right;border-top:1px solid var(--border-color);padding-top:10px;width:calc(100% - 112px);margin:-8px auto 15px}}'}),t.on(d("destroy"),(()=>this.ui.remove())),this.add(),this.modifyMq()}}class O extends k{getTarget(){let t;return this.app.envIs("mobile")?t=a.$("#js-mobile-toolbar"):(t=a.div({content:a.$$("#portal-game-toolbar > span")}),a.$("#portal-game-toolbar").append(t)),t}run(t){return super.toggle()}getComponent(t){return t.dataset.component===this.app.key?this.app:this.app.plugins.has(t.dataset.component)?this.app.plugins.get(t.dataset.component):null}toggleSubMenu(t,e){e?this.app.domSet("submenu",!1):(!t.target.dataset.action||t.target.dataset.action&&"boolean"!==t.target.dataset.action&&"link"!==t.target.dataset.action)&&this.app.domSet("submenu",!this.app.domGet("submenu"))}constructor(t){super(t,"Menu",""),this.target=this.getTarget();const e=["pz-toolbar-button__sba",this.app.envIs("mobile")?"pz-nav__toolbar-item":"pz-toolbar-button"];this.app.domSet("submenu",!1);const o=a.ul({classNames:["pane"],events:{pointerup:t=>{const e=t.target.closest("li");if(!e)return!1;const a=this.getComponent(e);if(0===t.button&&"boolean"===e.dataset.action){const t=!a.getState();a.toggle(t),e.classList.toggle("checked",t),a===this.app&&this.app.toggle(t)}else"popup"===e.dataset.action&&a.display()}},content:a.li({classNames:this.app.getState()?["checked"]:[],attributes:{title:this.app.title},data:{component:this.app.key,icon:"checkmark",action:"boolean"},content:`Show ${r("title")}`})});this.ui=a.div({events:{pointerup:t=>this.toggleSubMenu(t)},content:[r("title"),o],attributes:{role:"presentation"},classNames:e}),this.app.gameWrapper.addEventListener("pointerdown",(t=>{t.target.isSameNode(this.ui)||t.target.parentElement.isSameNode(o)||t.target.isSameNode(o)||this.toggleSubMenu(t,!0)})),t.on(d("pluginsReady"),(t=>{t.detail.forEach(((t,e)=>{if(!t.canChangeState||t===this)return!1;const s=t.menuAction||"boolean";o.append(a.li({classNames:"boolean"===s&&t.getState()?["checked"]:[],attributes:{title:t.description},data:{component:e,icon:"boolean"===s?"checkmark":t.menuIcon||null,action:s},content:t.title}))})),o.append(a.li({attributes:{title:r("label")+" Website"},data:{icon:"sba",component:"sbaWeb",action:"link"},content:a.a({content:r("label"),attributes:{href:r("url"),target:d()}})}))})),t.on(d("destroy"),(()=>this.ui.remove()))}}class U extends L{display(){return this.popup.setContent("subtitle",this.description).setContent("body",this.getPane()).toggle(!0),this}run(){return super.run(),a.$$("td",this.pane).forEach((t=>{const e=t.textContent.trim().split("/");2===e.length&&e[0]===e[1]&&t.classList.add(d("completed","d"))})),this}getData(){const t=g("foundTerms"),e=g("answers"),a=Array.from(new Set(e.map((t=>t.charAt(0))))).concat(["∑"]),o=Array.from(new Set(e.map((t=>t.length)))).concat(["∑"]);o.sort(((t,e)=>t-e)),a.sort();const s=[[""].concat(a)];let r=Object.fromEntries(a.map((t=>[t,{fnd:0,all:0}]))),n=Object.fromEntries(o.map((t=>[t,JSON.parse(JSON.stringify(r))])));e.forEach((e=>{const a=e.charAt(0),o=e.length;n[o][a].all++,n[o]["∑"].all++,n["∑"][a].all++,n["∑"]["∑"].all++,t.includes(e)&&(n[o][a].fnd++,n[o]["∑"].fnd++,n["∑"][a].fnd++,n["∑"]["∑"].fnd++)}));for(let[t,e]of Object.entries(n)){const a=[t];Object.values(e).forEach((t=>{a.push(t.all>0?`${t.fnd}/${t.all}`:"-")})),s.push(a)}return s}constructor(t){super(t,"Grid","The number of words by length and by first letter",{cssMarkers:{preeminent:(t,e)=>0===e}}),this.popup=new z(this.app,this.key).setContent("title",this.title),this.menuAction="popup",this.menuIcon="null"}}new class extends w{domSet(t,e){return document.body.dataset[d(t)]=e,this}domUnset(t){return delete document.body.dataset[d(t)],this}domGet(t){return JSON.parse(document.body.dataset[d(t)])}getObserverArgs(){return{target:this.gameWrapper,options:{childList:!0,subtree:!0,attributes:!0}}}getGameState(){const t=a.$("#js-hook-pz-moment__welcome",this.gameWrapper),e=a.$(".sb-content-box",this.gameWrapper);return t?e&&e.classList.contains("sb-game-locked")?0:e.classList.contains("sb-game-locked")?void 0:1:-1}getSyncData(){let t=localStorage.getItem("sb-today");return t?(t=JSON.parse(t),t.id&&t.id===v()?t.words||[]:null):null}envIs(t){return document.body.classList.contains("pz-"+t)}async getResults(){let t=10;return await new Promise((e=>{const a=setInterval((()=>{const o=this.getSyncData();!o&&t||(e(o||[]),clearInterval(a)),t--}),300)}))}async waitForGameState(t){let e=50;return await new Promise((a=>{const o=setInterval((()=>{const s=this.getGameState();(!e||this.getGameState()>=t)&&(a(s),clearInterval(o)),e--}),300)}))}load(){if(this.isLoaded)return!1;this.observer=this.buildObserver(),this.modalWrapper=a.$(".sb-modal-wrapper",this.gameWrapper),this.resultList=a.$(".sb-wordlist-items-pag",this.gameWrapper),this.waitForGameState(1).then((()=>{this.add(),this.domSet("active",!0),this.registerPlugins(),this.trigger(d("refreshUi")),this.isLoaded=!0}))}toggle(t){return this.domSet("active",t),this}buildObserver(){const t=new MutationObserver((t=>{t.forEach((t=>{if(!(t.target instanceof HTMLElement))return!1;switch(!0){case"childList"===t.type&&t.target.isSameNode(this.modalWrapper):a.$(".sb-modal-frame.yesterday",t.target)&&this.trigger(d("yesterday"),t.target);break;case"childList"===t.type&&t.target.classList.contains("sb-hive-input-content"):this.trigger(d("newInput"),t.target.textContent.trim());break;case"childList"===t.type&&t.target.isSameNode(this.resultList)&&!!t.addedNodes.length&&!!t.addedNodes[0].textContent.trim()&&t.addedNodes[0]instanceof HTMLElement:this.trigger(d("newWord"),t.addedNodes[0].textContent.trim())}}))})),e=this.getObserverArgs();return t.observe(e.target,e.options),t}buildUi(){const t={};t[d("destroy")]=()=>{this.observer.disconnect(),this.container.remove(),this.domUnset("theme")};const e=[r("prefix")];return a.div({data:{id:this.key,version:r("version")},classNames:e,events:t})}registerPlugins(){return this.plugins=new Map,Object.values({Header:N,Score:M,LetterCount:E,FirstLetter:P,ProgressBar:A,SpillTheBeans:T,DarkMode:S,ColorConfig:C,Pangrams:I,Googlify:D,Styles:_,Menu:O,Grid:U,YourProgress:j,TodaysAnswers:$}).forEach((t=>{const e=new t(this);e.add(),this.plugins.set(e.key,e)})),this.trigger(d("pluginsReady"),this.plugins),this}add(){this.container.append(this.ui),a.$(".sb-content-box",this.gameWrapper).prepend(this.container)}constructor(t){super(r("label"),{canChangeState:!0,key:d("app")});const e=a.$(`[data-id="${this.key}"]`);e&&e.dispatchEvent(new Event(d("destroy"))),this.gameWrapper=t,this.ui=this.buildUi(),this.container=a.div({classNames:[d("container","d")]}),this.isLoaded=!1,this.getResults().then((t=>{b(this,t)})).then((()=>{this.waitForGameState(0).then((t=>{0===t?a.$(".pz-moment__button-wrapper .pz-moment__button.primary",this.gameWrapper).addEventListener("pointerup",(()=>{this.load()})):this.load()}))}))}}(a.$("#js-hook-game-wrapper"))}();