!function(){"use strict";const t=document.querySelector(".sb-wordlist-items"),s={};let e,a,n=[],o=[],i=[],r=0;const d=(t,{text:s="",classNames:e=[],attributes:a={}}={})=>{const n=document.createElement(t);e.length&&n.classList.add(...e),""!==s&&(n.textContent=s);for(const[t,s]of Object.entries(a))s&&n.setAttribute(t,s);return n},l=t=>{let s=0;return t.forEach(t=>{gameData.today.pangrams.includes(t)?s+=15:t.length>4?s+=t.length:s+=1}),s};r=l(gameData.today.answers);const p=()=>{const t=(()=>{const t={};return gameData.today.answers.forEach(s=>{t[s.length]=t[s.length]||{found:0,missing:0,total:0},n.includes(s)?t[s.length].found++:t[s.length].missing++,t[s.length].total++}),t})(),s=Object.keys(t);s.sort((t,s)=>t-s);const e={Stats:[["Words",n.length,i.length,gameData.today.answers.length],["Points",l(n),l(i),r]],Spoilers:[["Pangrams",o.length,gameData.today.pangrams.length-o.length,gameData.today.pangrams.length]]};return s.forEach(s=>{e.Spoilers.push([s+" "+(s>1?"letters":"letter"),t[s].found,t[s].missing,t[s].total])}),e},c=()=>{n=[],o=[],t.querySelectorAll("li").forEach(t=>{const s=t.textContent;n.push(s),gameData.today.pangrams.includes(s)&&(o.push(s),t.classList.add("sb-pangram"))}),i=gameData.today.answers.filter(t=>!n.includes(t));const e=p();for(const[t,a]of Object.entries(s))e[t].length&&(a.innerHTML="",e[t].forEach(t=>{a.append(u("td",t))}))},g=()=>{confirm("Are you sure you want to display all answers?")&&(e.disconnect(),i.forEach(s=>{t.append((t=>{const s=d("li",{classNames:gameData.today.pangrams.includes(t)?["sb-anagram","sb-pangram"]:["sb-anagram"]});return s.append(d("a",{text:t,attributes:{href:`https://www.google.com/search?q=${t}`,target:"_blank"}})),s})(s))}))},u=(t,s)=>{const e=d("tr");return s.forEach((s,a)=>{e.append(d(0===a?"th":t,{text:s}))}),e},h=()=>{const t=d("span",{classNames:["closer"],text:"Ã—",attributes:{title:"Close assistant"}});return t.addEventListener("click",function(t){window.gameData.assistant=!1,a.remove(),e.disconnect(),this.parentNode.remove()}),t},b=t=>{t.draggable=!0;const s=d("div",{classNames:["dragger"],text:"Assistant",attributes:{title:"Hold the mouse down to drag assistant"}});return t.addEventListener("dragstart",function(t){t.stopPropagation();const s=getComputedStyle(this);this.dataset.right=s.getPropertyValue("right"),this.dataset.top=s.getPropertyValue("top"),this.dataset.mouseX=t.clientX,this.dataset.mouseY=t.clientY,t.dataTransfer.effectAllowed="move"},!1),t.addEventListener("dragend",function(t){t.stopPropagation();const s=t.clientX-this.dataset.mouseX,e=t.clientY-this.dataset.mouseY;this.style.right=parseInt(this.dataset.right)-s+"px",this.style.top=parseInt(this.dataset.top)+e+"px"},!1),s};(e=new MutationObserver((t,s)=>{const e=t.pop().addedNodes[0];gameData.today.pangrams.includes(e.textContent)&&e.classList.add("sb-pangram"),c()})).observe(t,{childList:!0});(()=>"/puzzles/spelling-bee"===window.location.pathname&&!window.gameData.assistant&&(a=d("style",{text:".sb-content-box{position:relative}.sb-wordlist-items .sb-pangram{border-bottom:2px #f8cd05 solid}.sb-wordlist-items .sb-anagram a{color:#888}.sb-assistant{position:absolute;width:200px;right:-210px;top:16px;background:white;z-index:3;border:1px solid #dcdcdc;border-radius:6px;padding:0 10px}.sb-assistant *{box-sizing:border-box}.sb-assistant .dragger{font-weight:bold;cursor:move;line-height:32px}.sb-assistant .closer{font-size:20px;font-weight:bold;position:absolute;top:0;right:0;line-height:32px;padding:0 10px;cursor:pointer}.sb-assistant details{font-size:90%;margin-bottom:10px}.sb-assistant summary{padding:9px 15px;background:#f8cd05;cursor:pointer}.sb-assistant .solution-content{padding:10px 15px}.sb-assistant table{border:1px solid #dcdcdc;border-collapse:collapse;width:100%;font-size:85%}.sb-assistant th,.sb-assistant td{border:1px solid #dcdcdc;padding:3px}.sb-assistant thead th{text-align:center}.sb-assistant tbody th{text-align:right}.sb-assistant tbody td{text-align:center}"}),document.querySelector("head").append(a),(()=>{const t=document.querySelector(".sb-content-box"),e=d("div",{classNames:["sb-assistant"]});e.append(b(e)),e.append(h()),["Stats","Spoilers","Solution"].forEach(t=>{const a=d("details",{attributes:{open:"Stats"===t&&"open"}}),n=d("summary",{text:t});let o;if("Solution"===t){o=d("div",{classNames:["solution-content"]});const t=d("button",{classNames:["pz-modal__button","white"],text:"Display answers",attributes:{type:"button"}});t.addEventListener("pointerup",t=>{g()}),o.append(t)}else{o=d("table");const e=d("thead");e.append(u("th",["","Found","Missing","Total"])),s[t]=d("tbody"),o.append(e),o.append(s[t]),c()}a.append(n),a.append(o),e.append(a)}),t.append(e)})(),c(),window.gameData.assistant=!0,!0))()}();