!function(){"use strict";const t=document.querySelector(".sb-content-box"),e=t.querySelector(".sb-wordlist-items"),a={};let s,n,o=[],r=[],i=[],d=0;const l=(t,{text:e="",classNames:a=[],attributes:s={}}={})=>{const n=document.createElement(t);a.length&&n.classList.add(...a),""!==e&&(n.textContent=e);for(const[t,e]of Object.entries(s))e&&n.setAttribute(t,e);return n},p=t=>{let e=0;return t.forEach(t=>{gameData.today.pangrams.includes(t)?e+=t.length+7:t.length>4?e+=t.length:e+=1}),e};d=p(gameData.today.answers);const c=()=>{const t=(()=>{const t={};return gameData.today.answers.forEach(e=>{t[e.length]=t[e.length]||{found:0,missing:0,total:0},o.includes(e)?t[e.length].found++:t[e.length].missing++,t[e.length].total++}),t})(),e=Object.keys(t);e.sort((t,e)=>t-e);const a={Stats:[["Words",o.length,i.length,gameData.today.answers.length],["Points",p(o),p(i),d]],Spoilers:[["Pangrams",r.length,gameData.today.pangrams.length-r.length,gameData.today.pangrams.length]]};return e.forEach(e=>{a.Spoilers.push([e+" "+(e>1?"letters":"letter"),t[e].found,t[e].missing,t[e].total])}),a},g=()=>{o=[],r=[],e.querySelectorAll("li").forEach(t=>{const e=t.textContent;o.push(e),gameData.today.pangrams.includes(e)&&(r.push(e),t.classList.add("sb-pangram"))}),i=gameData.today.answers.filter(t=>!o.includes(t));const t=c();for(const[e,s]of Object.entries(a))t[e].length&&(s.innerHTML="",t[e].forEach(t=>{s.append(u("td",t))}))},b=()=>{confirm("Are you sure you want to display all answers?")&&(s.disconnect(),i.forEach(t=>{e.append((t=>{const e=l("li",{classNames:gameData.today.pangrams.includes(t)?["sb-anagram","sb-pangram"]:["sb-anagram"]});return e.append(l("a",{text:t,attributes:{href:"https://www.google.com/search?q="+t,target:"_blank"}})),e})(t))}))},u=(t,e)=>{const a=l("tr");return e.forEach((e,s)=>{a.append(l(0===s?"th":t,{text:e}))}),a},h=()=>{const t=l("span",{classNames:["closer"],text:"×",attributes:{title:"Close assistant"}});return t.addEventListener("click",(function(){window.gameData.assistant=!1,n.remove(),s.disconnect(),this.parentNode.remove()})),t},m=e=>{t.addEventListener("dragstart",(function(t){t.preventDefault(),t.dataTransfer.dropEffect="move"})),t.addEventListener("ondragover",(function(t){t.preventDefault()})),e.draggable=!0;const a=l("div",{classNames:["dragger"],text:"Assistant",attributes:{title:"Hold the mouse down to drag assistant"}});return e.addEventListener("dragstart",(function(t){t.stopPropagation();const a=getComputedStyle(this);e.classList.add("dragging"),this.dataset.right=a.getPropertyValue("right"),this.dataset.top=a.getPropertyValue("top"),this.dataset.mouseX=t.clientX,this.dataset.mouseY=t.clientY}),!1),e.addEventListener("dragend",(function(t){t.stopPropagation();const a=t.clientX-this.dataset.mouseX,s=t.clientY-this.dataset.mouseY;this.style.right=parseInt(this.dataset.right)-a+"px",this.style.top=parseInt(this.dataset.top)+s+"px",e.classList.remove("dragging")}),!1),a};s=new MutationObserver(t=>{const e=t.pop().addedNodes[0];gameData.today.pangrams.includes(e.textContent)&&e.classList.add("sb-pangram"),g()}),s.observe(e,{childList:!0});"/puzzles/spelling-bee"===window.location.pathname&&!window.gameData.assistant&&(n=l("style",{text:'@charset "UTF-8";.sb-content-box{position:relative}.sb-wordlist-items .sb-pangram{border-bottom:2px #f8cd05 solid}.sb-wordlist-items .sb-anagram a{color:#888}.sba{position:absolute;width:200px;right:-210px;top:16px;background:white;z-index:3;border:1px solid gainsboro;border-radius:6px;padding:0 10px 5px}.sba *{-webkit-box-sizing:border-box;box-sizing:border-box}.sba :focus{outline-color:transparent}.sba .dragger{font-weight:bold;cursor:move;line-height:32px}.sba.dragging{opacity:0.5;border-style:dashed}.sba .closer{font-size:20px;font-weight:bold;position:absolute;top:0;right:0;line-height:32px;padding:0 10px;cursor:pointer}.sba details{font-size:90%;margin-bottom:5px}.sba details[open] summary:before{content:"－"}.sba summary{line-height:32px;padding:0 15px 0 25px;background:#f8cd05;cursor:pointer;list-style:none;position:relative}.sba summary::-webkit-details-marker{display:none}.sba summary:before{content:"＋";position:absolute;left:8px}.sba button{margin:10px auto;width:80%;display:block}.sba table{border:1px solid gainsboro;border-top:none;border-collapse:collapse;width:100%;font-size:85%}.sba td,.sba th{border:1px solid gainsboro;padding:3px}.sba thead th{text-align:center}.sba tbody th{text-align:right}.sba tbody td{text-align:center}.sba .link{color:currentColor;opacity:0.6;font-size:10px;text-align:right;display:block;padding-top:3px}.sba .link:hover{opacity:0.8;text-decoration:underline}'}),document.querySelector("head").append(n),(()=>{const e=l("div",{classNames:["sba"]});e.append(m(e)),e.append(h()),["Stats","Spoilers","Solution"].forEach(t=>{const s=l("details",{attributes:{open:"Stats"===t&&"open"}}),n=l("summary",{text:t});let o;if("Solution"===t){o=l("div");const t=l("button",{classNames:["pz-modal__button","white"],text:"Display answers",attributes:{type:"button"}});t.addEventListener("pointerup",()=>{b()}),o.append(t)}else{o=l("table");const e=l("thead");e.append(u("th",["","Found","Missing","Total"])),a[t]=l("tbody"),o.append(e),o.append(a[t]),g()}s.append(n),s.append(o),e.append(s)});const s=l("div",{classNames:["link"]}),n=l("a",{text:"Spelling Bee Assistant",attributes:{href:"https://draber.github.io",target:"_blank"}});s.append(n),e.append(s),t.append(e)})(),g(),window.gameData.assistant=!0)}();